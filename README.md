# OI-Modals
Lightweight modal library for Opportunity International. Built on top of jQuery and [Weavr](http://github.com/OpportunityIntl/Weavr/). [View the demo here](http://opportunityintl.github.io/OI-Modals/). Still in progress. 

## Usage
Load `OI.modal.min.js` and `OI.modal.min.css`.

Initialize modals with Javascript:
```javascript
// attach modal to click event on a trigger element (typically a link or button)
$(selector).modal({options});

// open a modal via Javascript
$.modal({options});
```

### Modal markup structure
Modals follow this basic structure:
```html
<div class="modal">
  <div class="modal-container">
    <button type="button" class="close icon-cross reset"></button>
    <div class="modal-content">
      <!-- Modal content goes here -->
    </div>
  </div>
</div>
```

For fullscreen modals, add the class 'fullscreen' to the modal container, add the class 'fixed' to the close button, and move the close button to be outside the modal container:

```html
<div class="modal">
  <button type="button" class="close icon-cross reset fixed"></button>
  <div class="modal-container fullscreen">
    <div class="modal-content">
      <!-- Modal content goes here -->
    </div>
  </div>
</div>
```

Modal sizing classes are added to the `.modal-container`. Use Weavr's container classes, or you could create your own classes as well to define a modal size outside of those default sizes.

### Using data attributes on trigger element
You can define the source and classes for a modal by adding data attributes to the trigger element. For example:

```html
<!-- Sets modal source to an existing modal in the document with the ID modal-1 -->
<a class="btn brand-purple-bg" data-modal="#modal-1">Trigger button</a>

<!-- Loads a YouTube video in an extra-large modal -->
<a class="btn brand-teal-bg" data-modal="https://www.youtube.com/embed/wJYLQ_e2CjY?rel=0&amp;controls=0&amp;showinfo=0" data-modal-classes="contained-12">Watch this video</a>
```

### Initializing all modals defined by data attributes
You can easily initialize all modals that have been defined by data attributes with the following line of Javascript:

```javascript
$('[data-modal]').modal();
```

### Overriding default options
You can access and override the default options for your whole project with `$.fn.modal.defaults`. Be sure to do this before any modals have been initialized. For example:

```javascript
// to override just one default
$.fn.modal.defaults.zIndex = 100;

// to override more than one option at once
$.extend($.fn.modal.defaults, {
  zIndex: 100,
  closeable: false
});
```

### Accessing a modal's `Modal` class instance
You can access the `Modal` class instance via jQuery data: `$(modalSelector).data('modal');`. Note that the modal selector should be for the modal itself, not its trigger. For example:

```javascript
// close a modal programmatically
$('#modal').data('modal').close();
```

The modal's class instance is also returned by the `$.modal()` function, so you can cache a reference to it when triggering a modal programmatically:

```javascript
// open modal and save reference to its class instance
var awesomeModal = $.modal({source: '#modal'});

// close modal
awesomeModal.close();
```

## Options
Option | Type | Description | Default
----|----|----|----
**source** | string | Optional. CSS (or jQuery) selector of the modal. Use if markup for modal already exists in the document. | Value of trigger's `data-modal` attribute or `NULL`
**content** | string or function | Optional. HTML to be inserted into the `.modal-content` div. Use if markup for modal does not exist in the document or needs to be generated dynamically. | `NULL`
**classes** | string | Optional. Classes to be added to the `.modal-container` div. Use to set size of modals generated by plugin. | Value of trigger's `data-modal-classes` attribute or `NULL`
**zIndex** | number | Optional. Set the `z-index` of the modal. | `3`
**closeable** | boolean | Optional. Define whether the modal can be closed by user input or not. If `false`, close icon is hidden and clicking the modal overlay will not close the modal, but modal can still be closed via `Modal.close()` method and by clicking on any element with class of `close` in the modal content. | `true`
**beforeOpen** | function | Optional. Callback function to be executed before modal opens. Return `false` to prevent modal from opening. | Empty function
**afterOpen** | function| Optional. Callback function to be executed after modal opens (after animation completes). | Empty function
**beforeClose** | function | Optional. Callback function to be executed before modal closes. Return `false` to prevent modal from closing. | Empty function
**afterClose** | function| Optional. Callback function to be executed after modal closes (after animation completes). | Empty function
