/* OI-Modals v0.9.0 
 * Compiled 07-22-2015
 * Copyright (c) 2015 Opportunity International 
 */
!function(a){a.fn.modal=function(b){return this.each(function(){new Modal(a(this),b)})}}(jQuery);var OI=OI||{};OI.modal={init:function(){0===$("#modals").length&&$("body").append($("<div>",{id:"modals"})),$("[data-modal]").modal()}};var Modal=function(a,b){var c,d=this,e=$(a);b=$.extend({classes:e.data("modal-classes")||null,source:e.data("modal")||null,content:null},b),"function"==typeof b.content&&(b.content=b.content.call(e)),this.isUrl=function(){return/^https?:\/\//.test(b.source)},this.isVideo=function(){return/^https?:\/\/(www\.youtube|player\.vimeo)/.test(b.source)},this.existsInDOM=function(){return $(b.source).length>0?!0:!1},this.setElement=function(){if(d.isUrl()){var a;d.isVideo()?(a=$("<div>",{"class":"flex-video"}),a.append($("<iframe>",{src:e.data("modal"),frameborder:0})),b.content=a):(a=$("<div>",{"class":"iframe"}),a.append($("<iframe>",{src:e.data("modal"),frameborder:0})),b.content=a),c=d.createElement()}else c=d.existsInDOM()?$(e.data("modal")):d.createElement()},this.createElement=function(){var a=$("<div>",{"class":"modal"});return a.append($("<button>",{type:"button","class":"reset icon-cross close"})),a.append($("<div>",{"class":"modal-content"})),b.classes&&a.addClass(b.classes),a.find(".modal-content").append(b.content),$("#modals").append(a),a.data("destroyOnClose",!0),a},this.show=function(){return $("body").addClass("animate-modal"),setTimeout(function(){$("body").addClass("show-modal"),c.addClass("show")},100),c.find(".close").bind("click.modal",function(){d.hide()}),$("#modals").bind("click.modal",function(){d.hide()}),c.bind("click.modal",function(a){a.stopPropagation()}),$(document).bind("keyup.modal",function(a){"27"==a.keyCode&&d.hide()}),!1},this.hide=function(){c.find(".close").unbind("click.modal"),$("#modals").unbind("click.modal"),c.unbind("click.modal"),$(document).unbind("keyup.modal"),$("body").removeClass("show-modal"),c.removeClass("show"),setTimeout(function(){$("body").removeClass("animate-modal"),c.data("destroyOnClose")&&c.remove()},500)},e.click(function(){d.setElement(),d.show()})};OI.modal.init();