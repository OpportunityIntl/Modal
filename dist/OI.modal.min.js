/* OI-Modals v0.9.0 
 * Compiled 07-23-2015
 * Copyright (c) 2015 Opportunity International 
 */
!function(a){a.fn.modal=function(c){return this.each(function(){new b(a(this),c)})};var b=function(b,c){var d,e=this,f=a(b);c=a.extend({classes:f.data("modal-classes")||null,source:f.data("modal")||null,content:null},c),"function"==typeof c.content&&(c.content=c.content.call(f)),this.isUrl=function(){return/^https?:\/\//.test(c.source)},this.isVideo=function(){return/^https?:\/\/(www\.youtube|player\.vimeo)/.test(c.source)},this.existsInDOM=function(){return a(c.source).length>0?!0:!1},this.setElement=function(){if(e.isUrl()){var b;e.isVideo()?(b=a("<div>",{"class":"flex-video"}),b.append(a("<iframe>",{src:f.data("modal"),frameborder:0})),c.content=b):(b=a("<div>",{"class":"iframe"}),b.append(a("<iframe>",{src:f.data("modal"),frameborder:0})),c.content=b),d=e.createElement()}else d=e.existsInDOM()?a(f.data("modal")):e.createElement()},this.createElement=function(){0===a("#modals").length&&a("body").append(a("<div>",{id:"modals"}));var b=a("<div>",{"class":"modal"});return b.append(a("<button>",{type:"button","class":"reset icon-cross close"})),b.append(a("<div>",{"class":"modal-content"})),c.classes&&b.addClass(c.classes),b.find(".modal-content").append(c.content),a("#modals").append(b),b.data("destroyOnClose",!0),b},this.show=function(){return a("body").addClass("animate-modal"),d.addClass("animate"),setTimeout(function(){a("body").addClass("show-modal"),d.addClass("show")},100),d.find(".close").bind("click.modal",function(){e.hide()}),a("#modals").bind("click.modal",function(){e.hide()}),d.bind("click.modal",function(a){a.stopPropagation()}),a(document).bind("keyup.modal",function(a){"27"==a.keyCode&&e.hide()}),!1},this.hide=function(){d.find(".close").unbind("click.modal"),a("#modals").unbind("click.modal"),d.unbind("click.modal"),a(document).unbind("keyup.modal"),a("body").removeClass("show-modal"),d.removeClass("show"),setTimeout(function(){a("body").removeClass("animate-modal"),d.removeClass("animate"),d.data("destroyOnClose")&&d.remove()},500)},f.click(function(){e.setElement(),e.show()})};a("[data-modal]").modal()}(jQuery);